# Créer des pluggins/ des extensions

## Déclarer le pluggin

- Dans le dossier wp-content/pluggin créez un dossier avec le nom de votre pluggin. Moi je vais l'appeler zero.
- Dans ce dossier, créez un premier fichier zero.php
- Pour que le plugin soit reconnu par WordPress, il faut nécessairement déclarer au moins son nom dans le fichier principal

```PHP

<?php
/*
Plugin Name: Zero plugin
Plugin URI: http://marie-zero-plugin.com
Description: Un plugin d'introduction pour le développement sous WordPress
Version: 0.1
Author: Thielens Marie
Author URI: http://www.thielens-marie.be
License: GPL2
*/

```

- Plugin URI : l'adresse du site de votre plugin décrivant son fonctionnement et donnant des informations complémentaires ;
- Description : un paragraphe de description du plugin, affiché en parcourant la liste des plugins ;
- Version : la version du plugin ;
- Author : votre nom ;
- Author URI : l'adresse de votre site ;
- License : un nom de licence pour le code du plugin.

**Note de sécurité: Prenez en compte le fait de bloquer l'accès direct aux fichiers PHP de votre Extension en ajoutant la ligne suivante au début de chacun d'entre eux.**

`defined( 'ABSPATH' ) or die( 'No script kiddies please!' );`

## Nos premières fonctions

Il ne reste plus qu'a écrire le plugin à proprement parlé. Nous allons utiliser le "hook" de the_content qui va permettre "d'accrocher" une fonction PHP à une action spécifique (donc the_content qui correspond au contenu d'un article ou d'une page) :

```PHP
  function hello_world($content){ 
  if(is_single()){  /* si je suis sur une page d'article */
    $text = "<p>Voici une ligne de pub</p>"; 
    return $text.$content; 
  } 
  else{ 
    return $content; 
  } 
} 
add_action('the_content', 'hello_world'); 

```

Notre "hook" va accrocher notre fonction hello_world au contenu de l'article/page. Nous récupérons le contenu de l'article/page en argument ($content) et nous créons une variable $text contenant un simple paragraphe en HTML.

Comme je souhaite afficher mon texte que sur les articles et pas autre chose comme les pages, je fais une simple condition à l'aide de is_single() qui permet de déterminer si je suis ou non sur une page d'article. Si oui nous retournons le tout c'est-à-dire notre variable $text et le contenu $content. Si non, je retourne que le contenu.

Il ne reste maintenant plus qu'à envoyer ce fichier phrase.php dans le dossier /wp-content/plugins/ de son blog WordPress puis d'activer ce nouveau plugin depuis l'administration. Vous devriez à présent voir votre phrase s'afficher au début de chaque article. Ce petit plugin peut être utilisé par exemple pour afficher un code de publicité sans pour autant modifier son thème et en ayant la possibilité de le désactiver en 1 clic !