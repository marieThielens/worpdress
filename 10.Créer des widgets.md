### Créer des widgets

1. La fonction : dans le theme/functions.php

Dans un premier temps, nous allons créer la fonction de cette nouvelle zone (pour qu’elle apparaisse dans l’admin du site dans Apparence > Widget). 

```PHP
function widget_initialiser(){
    // register_sidebar : permet de définir une nouvelle zone de widgets
    register_sidebar(array(
        'name' => 'marie footer', // nom du widget
        'id' => 'footer_texte',
        'before_widget' => '<div class="footer_texte">',
        'after_widget' => '</div>',
        'before_title' => '<h4>', 
        'after_title' => '</h4>',
    ));
}
add_action('widgets_init', 'widget_initialiser');

```

2. Créer la classe du widget

 Tous les widgets sont des objets qui doivent hériter de la classe WP_Widget (déclarée dans le fichier wp-includes/widgets.php).
 4 Fonctions sont nécessaire pour qu'un widget fonctionne : 

- __construct() – fonction constructeur
- widget() – contient la sortie du widget
- form() – détermine les paramètres du widget dans le tableau de bord WordPress
- update() – met à jour les paramètres du plugin

```PHP
class Marie_Widget extends WP_Widget 
{
	public function __construct()
	{
        // widget id, widget name, widget description
		parent::__construct('widget_marie_id', 'widgetMarie', array('description' => 'un widget pour le footer'));
	}

	public function widget($args, $instance)
	{
		echo 'widget de Marie';
	}

}

```

3. Déclarer le widget (dire à wordpress que l'on veut l'utiliser)

```PHP
<?php
add_action('widgets_init', function(){register_widget('Marie_Widget');});
```

4. Le contenu du widget : avec la fonction widget()



5. Le visuel du widget : la méthode form()

```PHP

<?php
public function form($instance)
{
    $title = isset($instance['title']) ? $instance['title'] : '';
    ?>
    <p>
        <label for="<?php echo $this->get_field_name( 'title' ); ?>"><?php _e( 'Title:' ); ?></label>
        <input class="widefat" id="<?php echo $this->get_field_id( 'title' ); ?>" name="<?php echo $this->get_field_name( 'title' ); ?>" type="text" value="<?php echo  $title; ?>" />
    </p>
    <?php
}

```